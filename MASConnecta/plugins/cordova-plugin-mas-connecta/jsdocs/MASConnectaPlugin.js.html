<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: MASConnectaPlugin.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: MASConnectaPlugin.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>/*
 * Copyright (c) 2016 CA, Inc. All rights reserved.
 * This software may be modified and distributed under the terms
 * of the MIT license. See the LICENSE file for details.
 *
 */

var MASPluginMQTTClient = require("./MASPluginMQTTClient"); 
var MASPluginMQTTMessage = require("./MASPluginMQTTMessage");
var MASPluginMQTTConstants = require("./MASPluginMQTTConstants");
var MASConnectaPluginConstants = require("./MASConnectaPluginConstants");
var MASConnectaPluginMessage = require("./MASConnectaPluginMessage");

/**
* @class MASPluginUser
* @hideconstructor
* @classdesc An extension of cordova-plugin-mas-core.MASPluginUser that exposes the new APIs for MAS Messaging. The methods are static hence can be called directly on MASPluginUser class.
*/
var MASPluginUser = require("cordova-plugin-mas-core.MASPluginUser");
{
	/**
	* Subscribes (starts Listening) to user's own custom topic. Topic name defaults to userid of the logged in user
    * @memberOf MASPluginUser
	* @function startListeningToMyMessages
    * @param {successCallbackFunction} successHandler user defined success callback that is invoked on success scenario.
    * @param {errorCallbackFunction} errorHandler user defined error callback that is invoked on failure scenario.
	* @example
	* MASConnectaPlugin.MASUser.startListeningToMyMessages(successHandler, errorHandler);
	*/
	 MASPluginUser.startListeningToMyMessages = function(successHandler, errorHandler) {
	 	return Cordova.exec(successHandler, errorHandler, "MASConnectaPlugin", "startListeningToMyMessages", []);
	 };

    /**
	* Unsubscribes (stop Listening) to user's own custom topic. Topic name defaults to userid of the logged in user.
    * @memberOf MASPluginUser
	* @function stopListeningToMyMessages
    * @param {successCallbackFunction} successHandler user defined success callback that is invoked on success scenario.
    * @param {errorCallbackFunction} errorHandler user defined error callback that is invoked on failure scenario.
	* @example
	* MASConnectaPlugin.MASUser.stopListeningToMyMessages(successHandler, errorHandler);
	*/
	 MASPluginUser.stopListeningToMyMessages = function(successHandler, errorHandler) {
	 	return Cordova.exec(successHandler, errorHandler, "MASConnectaPlugin", "stopListeningToMyMessages", []);
	 };

    /**
	* Send message to a user
    * @memberOf MASPluginUser
	* @function sendMessageToUser
    * @param {successCallbackFunction} successHandler user defined success callback that is invoked on success scenario.
    * @param {errorCallbackFunction} errorHandler user defined error callback that is invoked on failure scenario.
	* @param {string} message message to be sent (String / MASPluginMessage)
	* @param {string} userObjectId Unique ID of the user to whom the message is intended to
	* @example
	* MASConnectaPlugin.MASUser.sendMessageToUser(successHandler, errorHandler,message,userObjectId);
	*/
	 MASPluginUser.sendMessageToUser = function(successHandler, errorHandler, message, userObjectId) {
	 	return Cordova.exec(successHandler, errorHandler, "MASConnectaPlugin", "sendMessageToUser", [message, userObjectId]);
	 };

	/**
	* Send message to a user on a topic
    * @memberOf MASPluginUser
	* @function sendMessageToUserOnTopic
    * @param {successCallbackFunction} successHandler user defined success callback that is invoked on success scenario.
    * @param {errorCallbackFunction} errorHandler user defined error callback that is invoked on failure scenario.
	* @param {string} message  message to be sent (String / MASPluginMessage)
	* @param {string} topicName topic on which the user wants to send the message
	* @param {string} userObjectId Unique ID of the user to whom the message is intended to
	* @example
	* MASConnectaPlugin.MASUser.sendMessageToUserOnTopic(successHandler, errorHandler,message, userObjectId, topicName);
	*/
	 MASPluginUser.sendMessageToUserOnTopic = function(successHandler, errorHandler, message, userObjectId, topicName) {
	 	return Cordova.exec(successHandler, errorHandler, "MASConnectaPlugin", "sendMessageToUserOnTopic", [message, userObjectId, topicName]);
	 };
}

/**
* @class MASConnectaPlugin
* @hideconstructor
* @classdesc The parent Connecta interface to get the objects of MAS Messaging and PubSub interfaces.
* @example
* &lt;caption>To get instance of {@link MASPluginMQTTConstants} : An interface that contains the required MQTT connection options for MQTT broker&lt;/caption>
var masMQTTConstants = new MASConnectaPlugin.MASMQTTConstants(host, port, false, "");
* @example
* &lt;caption>To get instance of {@link MASPluginMQTTClient}: An interface that corresponds to a Public Broker including MAG&lt;/caption>
var masMQTTClient = new MASConnectaPlugin.MASMQTTClient(clientId, masMQTTConstants);
* @example
* &lt;caption>Access {@link MASConnectaPluginConstants}: A static utility that contains the plugin related constants and Global callbacks&lt;/caption>
var MASConnetaConstants = MASConnectaPlugin.MASConnetaConstants;
* @example
* &lt;caption>To get instance of {@link MASConnectaPluginMessage}: An interface that is mapped to the native MASMessage structure&lt;/caption>
var MASConnectaMessage = new MASConnectaPlugin.MASConnectaMessage();
* @example
* &lt;caption>MASConnecta {@link MASPluginUser} APIs are static API that are called directly using the class reference as follows&lt;/caption>
* MASConnectaPlugin.MASUser.sendMessageToUser(successHandler, errorHandler, message, userObjectId);
*/
var MASConnectaPlugin = {
	MASMQTTClient: MASPluginMQTTClient,
	MASMQTTMessage: MASPluginMQTTMessage,
	MASMQTTConstants: MASPluginMQTTConstants,
	MASConnetaConstants: MASConnectaPluginConstants,
	MASConnectaMessage: MASConnectaPluginMessage,
    MASUser: MASPluginUser,
	 /**
	 * Call this function before using the MASConnecta messaging APIs. This API registers the notification receiver for observing the messages that are intended for the client.
	 * @memberOf MASConnectaPlugin
	 * @function MASRegisterListener
     * @param {successCallbackFunction} successHandler user defined success callback that is invoked on success scenario.
     * @param {errorCallbackFunction} errorHandler user defined error callback that is invoked on failure scenario.
	 * @example
	 * &lt;caption>Initializing and registering the listener&lt;/caption>
	MASConnectaPlugin.MASRegisterListener(
		function(success) {
			if (null != success.Payload) {
				var toAlert = {};
				toAlert.sender = success.SenderId;
				var payload = (success.Payload!=null?success.Payload:success.payload);
				toAlert.payload = atob(payload);
				toAlert.topic = success.Topic;
				alert(JSON.stringify(toAlert));
            }
        }, function(error) {
			console.log("Listener registration failed!!!:" + JSON.stringify(error));
        }
	);
	 */
	 MASRegisterListener: function(successHandler, errorHandler) {
	 	return Cordova.exec(successHandler, errorHandler, "MASConnectaPlugin", "registerReceiver", []);
	 }
};
module.exports = MASConnectaPlugin;</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Classes</h3><ul><li><a href="MASConnectaPlugin.html">MASConnectaPlugin</a></li><li><a href="MASConnectaPluginConstants.html">MASConnectaPluginConstants</a></li><li><a href="MASConnectaPluginMessage.html">MASConnectaPluginMessage</a></li><li><a href="MASPluginMQTTClient.html">MASPluginMQTTClient</a></li><li><a href="MASPluginMQTTConstants.html">MASPluginMQTTConstants</a></li><li><a href="MASPluginUser.html">MASPluginUser</a></li></ul><h3><a href="global.html">Global</a></h3>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.5.5</a> on Tue Oct 16 2018 14:32:34 GMT+0530 (India Standard Time)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
